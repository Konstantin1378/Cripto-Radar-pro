<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–î–æ–º—ñ–Ω–∞—Ü—ñ—è BTC, ETH, USDT, Others</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://s3.tradingview.com/tv.js"></script>
  <style>
    body {
      background-color: #0d1117;
      color: #e6edf3;
      font-family: "Segoe UI", sans-serif;
      margin: 0;
    }
    header {
      background-color: #161b22;
      padding: 20px;
      text-align: center;
      position: relative;
    }
    h1 {
      margin: 0;
      font-size: 28px;
    }
    .controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    .controls button {
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      background-color: #238636;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: background-color 0.3s;
    }
    .controls button:hover {
      background-color: #2ea043;
    }
    .section {
      padding: 30px 20px;
      border-bottom: 1px solid #21262d;
    }
    h2 {
      font-size: 22px;
      margin-bottom: 10px;
    }
    .tv-chart {
      height: 600px; /* –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É –≥—Ä–∞—Ñ–∏–∫–æ–≤ */
    }
    footer {
      text-align: center;
      padding: 20px;
      color: #6e7681;
      font-size: 14px;
    }
    #refresh-btn {
      background-color: #1f6feb;
    }
    #refresh-btn:hover {
      background-color: #2b7af0;
    }
    .loading {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      100% { transform: rotate(360deg); }
    }
    
    /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (max-width: 768px) {
      .tv-chart {
        height: 400px; /* –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
      }
      h1 {
        font-size: 22px;
      }
      h2 {
        font-size: 18px;
      }
      .controls {
        flex-direction: column;
        align-items: center;
      }
      .controls button {
        width: 100%;
        max-width: 300px;
        justify-content: center;
      }
    }
    
    /* –£–ª—É—á—à–µ–Ω–∏–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    @media (min-width: 1600px) {
      .tv-chart {
        height: 700px;
      }
    }
    
    .update-info {
      font-size: 14px;
      color: #8b949e;
      margin-top: 5px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <header>
    <h1 id="main-title">üìä –ê–Ω–∞–ª—ñ–∑ –¥–æ–º—ñ–Ω–∞—Ü—ñ—ó BTC, ETH, USDT —Ç–∞ Others</h1>
    <div class="controls">
      <div class="lang-switch">
        <button onclick="setLang('uk')">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
        <button onclick="setLang('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
        <button onclick="setLang('en')">üá∫üá∏ English</button>
      </div>
      <button id="refresh-btn" onclick="refreshCharts()">
        <span id="refresh-icon">üîÑ</span>
        <span id="refresh-text">–û–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ</span>
      </button>
    </div>
    <p id="main-subtitle">–î–∞–Ω—ñ –∑ TradingView</p>
  </header>

  <div class="section">
    <h2 id="btc-title">üü° –î–æ–º—ñ–Ω–∞—Ü—ñ—è Bitcoin (BTC.D)</h2>
    <p id="btc-desc">BTC –¥–æ–º—ñ–Ω—É—î —è–∫ "—Ü–∏—Ñ—Ä–æ–≤–µ –∑–æ–ª–æ—Ç–æ", –∑—Ä–æ—Å—Ç–∞—é—á–∏ –Ω–∞ —Ñ–æ–Ω—ñ –∑–Ω–∏–∂–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä–µ—Å—É –¥–æ –∞–ª—å—Ç—ñ–≤.</p>
    <div class="tv-chart" id="btc-chart"></div>
    <div class="update-info" id="btc-update"></div>
  </div>

  <div class="section">
    <h2 id="eth-title">üîµ –î–æ–º—ñ–Ω–∞—Ü—ñ—è Ethereum (ETH.D)</h2>
    <p id="eth-desc">ETH –ø–æ—Å—Ç—É–ø–æ–≤–æ –≤—Ç—Ä–∞—á–∞—î —á–∞—Å—Ç–∫—É —á–µ—Ä–µ–∑ —Å–ª–∞–±–∫—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ —Ç–∞ –≤—ñ–¥—Ç—ñ–∫ –Ω–∞ L2-–º–µ—Ä–µ–∂—ñ.</p>
    <div class="tv-chart" id="eth-chart"></div>
    <div class="update-info" id="eth-update"></div>
  </div>

  <div class="section">
    <h2 id="usdt-title">üü¢ –î–æ–º—ñ–Ω–∞—Ü—ñ—è USDT (USDT.D)</h2>
    <p id="usdt-desc">–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è USDT-–¥–æ–º—ñ–Ω–∞—Ü—ñ—ó ‚Äî —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞—Ö—É –∞–±–æ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø–∞–¥—ñ–Ω–Ω—è —Ä–∏–Ω–∫—É.</p>
    <div class="tv-chart" id="usdt-chart"></div>
    <div class="update-info" id="usdt-update"></div>
  </div>

  <div class="section">
    <h2 id="others-title">üü† –î–æ–º—ñ–Ω–∞—Ü—ñ—è Others (OTHERS.D)</h2>
    <p id="others-desc">–î–æ–º—ñ–Ω–∞—Ü—ñ—è "—ñ–Ω—à–∏—Ö" –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, —è–∫—ñ –Ω–µ –≤—Ö–æ–¥—è—Ç—å —É BTC, ETH —á–∏ USDT.</p>
    <div class="tv-chart" id="others-chart"></div>
    <div class="update-info" id="others-update"></div>
  </div>

  <footer>
    <span id="footer-text">–î–∞–Ω—ñ –∑ TradingView</span>
  </footer>

  <script>
    const translations = {
      uk: {
        title: "üìä –ê–Ω–∞–ª—ñ–∑ –¥–æ–º—ñ–Ω–∞—Ü—ñ—ó BTC, ETH, USDT —Ç–∞ Others",
        subtitle: "–î–∞–Ω—ñ –∑ TradingView",
        btcTitle: "üü° –î–æ–º—ñ–Ω–∞—Ü—ñ—è Bitcoin (BTC.D)",
        btcDesc: 'BTC –¥–æ–º—ñ–Ω—É—î —è–∫ "—Ü–∏—Ñ—Ä–æ–≤–µ –∑–æ–ª–æ—Ç–æ", –∑—Ä–æ—Å—Ç–∞—é—á–∏ –Ω–∞ —Ñ–æ–Ω—ñ –∑–Ω–∏–∂–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä–µ—Å—É –¥–æ –∞–ª—å—Ç—ñ–≤.',
        ethTitle: "üîµ –î–æ–º—ñ–Ω–∞—Ü—ñ—è Ethereum (ETH.D)",
        ethDesc: "ETH –ø–æ—Å—Ç—É–ø–æ–≤–æ –≤—Ç—Ä–∞—á–∞—î —á–∞—Å—Ç–∫—É —á–µ—Ä–µ–∑ —Å–ª–∞–±–∫—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ —Ç–∞ –≤—ñ–¥—Ç—ñ–∫ –Ω–∞ L2-–º–µ—Ä–µ–∂—ñ.",
        usdtTitle: "üü¢ –î–æ–º—ñ–Ω–∞—Ü—ñ—è USDT (USDT.D)",
        usdtDesc: "–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è USDT-–¥–æ–º—ñ–Ω–∞—Ü—ñ—ó ‚Äî —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞—Ö—É –∞–±–æ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø–∞–¥—ñ–Ω–Ω—è —Ä–∏–Ω–∫—É.",
        othersTitle: "üü† –î–æ–º—ñ–Ω–∞—Ü—ñ—è Others (OTHERS.D)",
        othersDesc: "–î–æ–º—ñ–Ω–∞—Ü—ñ—è \"—ñ–Ω—à–∏—Ö\" –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, —è–∫—ñ –Ω–µ –≤—Ö–æ–¥—è—Ç—å —É BTC, ETH —á–∏ USDT.",
        footer: "–î–∞–Ω—ñ –∑ TradingView",
        refreshText: "–û–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ",
        lastUpdated: "–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: "
      },
      ru: {
        title: "üìä –ê–Ω–∞–ª–∏–∑ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è BTC, ETH, USDT –∏ Others",
        subtitle: "–î–∞–Ω–Ω—ã–µ —Å TradingView",
        btcTitle: "üü° –î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Bitcoin (BTC.D)",
        btcDesc: 'BTC –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ ¬´—Ü–∏—Ñ—Ä–æ–≤–æ–µ –∑–æ–ª–æ—Ç–æ¬ª, —É—Å–∏–ª–∏–≤–∞—è—Å—å –Ω–∞ —Ñ–æ–Ω–µ —Å–Ω–∏–∂–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ –∞–ª—å—Ç–∞–º.',
        ethTitle: "üîµ –î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Ethereum (ETH.D)",
        ethDesc: "ETH —Ç–µ—Ä—è–µ—Ç –¥–æ–ª—é –∏–∑-–∑–∞ —Å–ª–∞–±–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ L2-—Å–µ—Ç–∏.",
        usdtTitle: "üü¢ –î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ USDT (USDT.D)",
        usdtDesc: "–†–æ—Å—Ç –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è USDT ‚Äî –ø—Ä–∏–∑–Ω–∞–∫ —Å—Ç—Ä–∞—Ö–∞ –∏–ª–∏ –æ–∂–∏–¥–∞–Ω–∏—è —Å–Ω–∏–∂–µ–Ω–∏—è —Ä—ã–Ω–∫–∞.",
        othersTitle: "üü† –î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Others (OTHERS.D)",
        othersDesc: "–î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ¬´–¥—Ä—É–≥–∏—Ö¬ª –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—Ö–æ–¥—è—Ç –≤ BTC, ETH –∏–ª–∏ USDT.",
        footer: "–î–∞–Ω–Ω—ã–µ —Å TradingView",
        refreshText: "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ",
        lastUpdated: "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: "
      },
      en: {
        title: "üìä BTC, ETH, USDT and Others Dominance Analysis",
        subtitle: "Data from TradingView",
        btcTitle: "üü° Bitcoin Dominance (BTC.D)",
        btcDesc: "BTC acts as 'digital gold', growing while altcoins lose appeal.",
        ethTitle: "üîµ Ethereum Dominance (ETH.D)",
        ethDesc: "ETH is slowly losing share due to weak dev activity and L2 migration.",
        usdtTitle: "üü¢ USDT Dominance (USDT.D)",
        usdtDesc: "USDT dominance rise shows fear or market downturn expectations.",
        othersTitle: "üü† Others Dominance (OTHERS.D)",
        othersDesc: "Dominance of \"other\" cryptocurrencies outside BTC, ETH, and USDT.",
        footer: "Data from TradingView",
        refreshText: "Refresh data",
        lastUpdated: "Last updated: "
      }
    };

    let widgets = {
      btc: null,
      eth: null,
      usdt: null,
      others: null
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
    function formatDateTime(date, lang) {
      const options = {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      };
      
      let locale = 'en-US';
      if (lang === 'uk') locale = 'uk-UA';
      if (lang === 'ru') locale = 'ru-RU';
      
      return date.toLocaleString(locale, options);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
    function updateLastUpdatedInfo(lang) {
      const now = new Date();
      const formattedDate = formatDateTime(now, lang);
      const t = translations[lang];
      
      document.querySelectorAll('.update-info').forEach(el => {
        el.textContent = t.lastUpdated + formattedDate;
      });
    }

    function setLang(lang) {
      const t = translations[lang];
      document.getElementById("main-title").textContent = t.title;
      document.getElementById("main-subtitle").textContent = t.subtitle;
      document.getElementById("btc-title").textContent = t.btcTitle;
      document.getElementById("btc-desc").textContent = t.btcDesc;
      document.getElementById("eth-title").textContent = t.ethTitle;
      document.getElementById("eth-desc").textContent = t.ethDesc;
      document.getElementById("usdt-title").textContent = t.usdtTitle;
      document.getElementById("usdt-desc").textContent = t.usdtDesc;
      document.getElementById("others-title").textContent = t.othersTitle;
      document.getElementById("others-desc").textContent = t.othersDesc;
      document.getElementById("footer-text").textContent = t.footer;
      document.getElementById("refresh-text").textContent = t.refreshText;
      localStorage.setItem('lang', lang);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏
      updateLastUpdatedInfo(lang);
    }

    function createTVWidget(container, symbol, widgetKey) {
      widgets[widgetKey] = new TradingView.widget({
        container_id: container,
        width: "100%",
        height: "100%",
        symbol: symbol,
        interval: "D",
        timezone: "Etc/UTC",
        theme: "dark",
        style: "1",
        locale: "en",
        hide_top_toolbar: true,
        hide_legend: false,
        autosize: true, // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
        studies_overrides: {
          "volume.volume.color.0": "#36a2eb",
          "volume.volume.color.1": "#ff6384",
          "volume.volume.transparency": 70,
          "volume.show ma": false
        }
      });
    }

    function initCharts() {
      createTVWidget("btc-chart", "CRYPTOCAP:BTC.D", "btc");
      createTVWidget("eth-chart", "CRYPTOCAP:ETH.D", "eth");
      createTVWidget("usdt-chart", "CRYPTOCAP:USDT.D", "usdt");
      createTVWidget("others-chart", "CRYPTOCAP:OTHERS.D", "others");
    }

    function refreshCharts() {
      const btnIcon = document.getElementById("refresh-icon");
      const refreshText = document.getElementById("refresh-text");
      const lang = localStorage.getItem('lang') || 'uk';
      
      // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
      btnIcon.innerHTML = "‚è≥";
      btnIcon.classList.add("loading");
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –≥—Ä–∞—Ñ–∏–∫
      Object.keys(widgets).forEach(key => {
        if (widgets[key]) {
          try {
            widgets[key].chart().setSymbol(widgets[key]._options.symbol, () => {
              console.log(`${key} chart refreshed`);
            });
          } catch (e) {
            console.error(`Error refreshing ${key} chart:`, e);
          }
        }
      });
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏
      updateLastUpdatedInfo(lang);
      
      // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –≤–∏–¥ –∫–Ω–æ–ø–∫–∏
      setTimeout(() => {
        btnIcon.innerHTML = "üîÑ";
        btnIcon.classList.remove("loading");
      }, 1500);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
      const savedLang = localStorage.getItem('lang') || 'uk';
      document.documentElement.lang = savedLang;
      setLang(savedLang);
      initCharts();
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏
      updateLastUpdatedInfo(savedLang);
    });
    
    // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    window.addEventListener('resize', function() {
      Object.values(widgets).forEach(widget => {
        if (widget) {
          setTimeout(() => widget.chart().resize(), 100);
        }
      });
    });
  </script>
</body>
</html>